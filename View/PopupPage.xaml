<?xml version="1.0" encoding="utf-8" ?>
<mct:Popup xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
           xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
           xmlns:model="clr-namespace:MauiApp1.Model"
           xmlns:mct="clr-namespace:CommunityToolkit.Maui.Views;assembly=CommunityToolkit.Maui"
           x:Class="MauiApp1.View.PopupPage"
           CanBeDismissedByTappingOutsideOfPopup="False"
           Color="Transparent">

    <Border Padding="0" BackgroundColor="{StaticResource LightBackground}">
        <Border.StrokeShape>
            <RoundRectangle CornerRadius="14"/>
        </Border.StrokeShape>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <Entry 
                Grid.Row="0"
                Text="{Binding CurrSelectedEvent.Name}"
                BackgroundColor="Transparent"
                FontSize="30"
                Margin="10"
                VerticalOptions="Start" 
                HorizontalOptions="Start"
                FontAttributes="Bold"
                TextColor="{StaticResource HeaderAlt}"/>
            <ImageButton
                Grid.Row="0"
                Grid.Column="1"
                HorizontalOptions="End"
                BackgroundColor="Transparent"
                Source="cross.png"
                HeightRequest="50"
                WidthRequest="50"
                Margin="0,0,10,0"
                Command="{Binding CloseCommand}" />

            <HorizontalStackLayout Grid.Row="1" Grid.ColumnSpan="2" Margin="10">
                <DatePicker Date="{Binding CurrSelectedEvent.DateTime}" Format="dd/MM/yy" TextColor="{StaticResource HeaderAlt}" />
                <TimePicker Time="{Binding CurrSelectedEvent.DateTime.TimeOfDay}" TextColor="{StaticResource HeaderAlt}" />
            </HorizontalStackLayout>

            <Label Grid.Row="2" Grid.ColumnSpan="2" Text="Description" Margin="20,10,10,10" FontAttributes="Bold" TextColor="{StaticResource Header2}" />

            <ScrollView Grid.Row="3" Grid.ColumnSpan="2" Padding="4" VerticalOptions="StartAndExpand">
                <Editor 
                        InputTransparent="False" 
                        Placeholder="Description" 
                        Text="{Binding CurrSelectedEvent.Description}" 
                        VerticalOptions="Center" 
                        TextColor="{StaticResource Text}"
                        Margin="10,0,0,0"
                        BackgroundColor="Transparent"
                        />
            </ScrollView>

            <Grid Grid.Row="4" Grid.ColumnSpan="2">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <Button Grid.Column="0" 
                            Style="{StaticResource PoppUpButton}" 
                            Text="DELETE"
                            Command="{Binding DeleteCommand}" 
                            CommandParameter="{Binding CurrSelectedEvent}" />
                <Button Grid.Column="2"
                            Style="{StaticResource PoppUpButton}"
                            Text="SAVE" 
                            Command="{Binding SaveCommand}" 
                            CommandParameter="{Binding CurrSelectedEvent}" />
            </Grid>
        </Grid>
    </Border>

</mct:Popup>